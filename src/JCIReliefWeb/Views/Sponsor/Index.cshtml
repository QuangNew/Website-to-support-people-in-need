@{
    ViewData["Title"] = "Muốn quyên góp";
}

<div class="sponsor-page">
    <!-- Campaign Hero -->
    <div class="campaign-hero mb-4">
        <div class="row align-items-center">
            <div class="col-lg-7">
                <span class="campaign-status">
                    <i class="fa-solid fa-circle text-success me-1"></i>Đang diễn ra
                </span>
                <h1 class="campaign-title">Chung lòng mùa lũ 2026</h1>
                <p class="campaign-desc">
                    Cùng JCI chung tay hỗ trợ đồng bào miền Trung vượt qua thiên tai. 
                    Mỗi đóng góp của bạn sẽ mang đến hy vọng cho những gia đình đang gặp khó khăn.
                </p>
                
                <div class="campaign-progress-wrapper">
                    <div class="campaign-progress">
                        <div class="progress" style="height: 16px;">
                            <div class="progress-bar bg-primary" style="width: 77.5%"></div>
                        </div>
                        <div class="progress-labels">
                            <span class="progress-raised">387,500,000 VNĐ</span>
                            <span class="progress-target">/ 500,000,000 VNĐ</span>
                        </div>
                    </div>
                    <div class="campaign-stats">
                        <div class="c-stat">
                            <span class="c-stat-value">1,245</span>
                            <span class="c-stat-label">Mạnh thường quân</span>
                        </div>
                        <div class="c-stat">
                            <span class="c-stat-value">28</span>
                            <span class="c-stat-label">Ngày còn lại</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-5">
                <img src="https://via.placeholder.com/500x300/2563eb/ffffff?text=Campaign+Image" 
                     class="img-fluid rounded-4 shadow" alt="Campaign">
            </div>
        </div>
    </div>

    <div class="row g-4">
        <!-- Donation Form -->
        <div class="col-lg-7">
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0">
                        <i class="fa-solid fa-heart text-danger me-2"></i>Quyên góp
                    </h5>
                </div>
                <div class="card-body">
                    <!-- Donation Type Tabs -->
                    <ul class="nav nav-pills mb-4" role="tablist">
                        <li class="nav-item">
                            <button class="nav-link active" data-bs-toggle="pill" data-bs-target="#moneyTab">
                                <i class="fa-solid fa-money-bill-wave me-1"></i>Tiền mặt
                            </button>
                        </li>
                        <li class="nav-item">
                            <button class="nav-link" data-bs-toggle="pill" data-bs-target="#goodsTab">
                                <i class="fa-solid fa-boxes-stacked me-1"></i>Hiện vật
                            </button>
                        </li>
                    </ul>

                    <div class="tab-content">
                        <!-- Money Donation -->
                        <div class="tab-pane fade show active" id="moneyTab">
                            <div class="amount-presets mb-4">
                                <label class="form-label">Chọn số tiền quyên góp:</label>
                                <div class="preset-grid">
                                    <button type="button" class="preset-btn" data-amount="100000">100,000đ</button>
                                    <button type="button" class="preset-btn" data-amount="200000">200,000đ</button>
                                    <button type="button" class="preset-btn active" data-amount="500000">500,000đ</button>
                                    <button type="button" class="preset-btn" data-amount="1000000">1,000,000đ</button>
                                    <button type="button" class="preset-btn" data-amount="2000000">2,000,000đ</button>
                                    <button type="button" class="preset-btn" data-amount="5000000">5,000,000đ</button>
                                </div>
                            </div>

                            <div class="mb-4">
                                <label class="form-label">Hoặc nhập số tiền khác:</label>
                                <div class="input-group input-group-lg">
                                    <input type="number" class="form-control" id="customAmount" value="500000">
                                    <span class="input-group-text">VNĐ</span>
                                </div>
                            </div>

                            <div class="mb-4">
                                <label class="form-label">Phương thức thanh toán:</label>
                                <div class="payment-methods">
                                    <label class="payment-method">
                                        <input type="radio" name="payment" value="bank" checked>
                                        <span class="method-box">
                                            <i class="fa-solid fa-building-columns"></i>
                                            <span>Chuyển khoản</span>
                                        </span>
                                    </label>
                                    <label class="payment-method">
                                        <input type="radio" name="payment" value="momo">
                                        <span class="method-box">
                                            <i class="fa-solid fa-wallet"></i>
                                            <span>MoMo</span>
                                        </span>
                                    </label>
                                    <label class="payment-method">
                                        <input type="radio" name="payment" value="vnpay">
                                        <span class="method-box">
                                            <i class="fa-solid fa-credit-card"></i>
                                            <span>VNPay</span>
                                        </span>
                                    </label>
                                </div>
                            </div>

                            <!-- Bank Info -->
                            <div class="bank-info mb-4" id="bankInfo">
                                <div class="alert alert-primary">
                                    <h6><i class="fa-solid fa-building-columns me-2"></i>Thông tin chuyển khoản:</h6>
                                    <p class="mb-1"><strong>Ngân hàng:</strong> Vietcombank</p>
                                    <p class="mb-1"><strong>Số tài khoản:</strong> 1234567890</p>
                                    <p class="mb-1"><strong>Chủ tài khoản:</strong> JCI VN - Quỹ cứu trợ</p>
                                    <p class="mb-0"><strong>Nội dung:</strong> [Tên] + SOS2026</p>
                                </div>
                            </div>

                            <div class="mb-4">
                                <label class="form-label">Lời nhắn (tùy chọn):</label>
                                <textarea class="form-control" rows="2" placeholder="Gửi lời động viên..."></textarea>
                            </div>

                            <div class="form-check mb-4">
                                <input class="form-check-input" type="checkbox" id="anonymous">
                                <label class="form-check-label" for="anonymous">
                                    Quyên góp ẩn danh
                                </label>
                            </div>
                        </div>

                        <!-- Goods Donation -->
                        <div class="tab-pane fade" id="goodsTab">
                            <div class="goods-categories mb-4">
                                <label class="form-label">Loại hàng hóa:</label>
                                <div class="goods-grid">
                                    <label class="goods-item">
                                        <input type="checkbox" name="goods" value="rice">
                                        <span class="goods-box">
                                            <i class="fa-solid fa-bowl-rice"></i>
                                            <span>Gạo</span>
                                        </span>
                                    </label>
                                    <label class="goods-item">
                                        <input type="checkbox" name="goods" value="noodles">
                                        <span class="goods-box">
                                            <i class="fa-solid fa-bowl-food"></i>
                                            <span>Mì tôm</span>
                                        </span>
                                    </label>
                                    <label class="goods-item">
                                        <input type="checkbox" name="goods" value="water">
                                        <span class="goods-box">
                                            <i class="fa-solid fa-bottle-water"></i>
                                            <span>Nước</span>
                                        </span>
                                    </label>
                                    <label class="goods-item">
                                        <input type="checkbox" name="goods" value="medicine">
                                        <span class="goods-box">
                                            <i class="fa-solid fa-pills"></i>
                                            <span>Thuốc</span>
                                        </span>
                                    </label>
                                    <label class="goods-item">
                                        <input type="checkbox" name="goods" value="clothes">
                                        <span class="goods-box">
                                            <i class="fa-solid fa-shirt"></i>
                                            <span>Quần áo</span>
                                        </span>
                                    </label>
                                    <label class="goods-item">
                                        <input type="checkbox" name="goods" value="other">
                                        <span class="goods-box">
                                            <i class="fa-solid fa-box"></i>
                                            <span>Khác</span>
                                        </span>
                                    </label>
                                </div>
                            </div>

                            <div class="mb-3">
                                <label class="form-label">Mô tả chi tiết:</label>
                                <textarea class="form-control" rows="3" placeholder="Số lượng, tình trạng hàng hóa..."></textarea>
                            </div>

                            <div class="alert alert-info">
                                <i class="fa-solid fa-truck me-2"></i>
                                Vui lòng liên hệ hotline <strong>1900xxxx</strong> để sắp xếp vận chuyển hoặc mang đến địa điểm tiếp nhận gần nhất.
                            </div>
                        </div>
                    </div>

                    <button type="submit" class="btn btn-primary btn-lg w-100" id="donateBtn">
                        <i class="fa-solid fa-heart me-2"></i>Quyên góp ngay
                    </button>
                </div>
            </div>
        </div>

        <!-- Recent Donations -->
        <div class="col-lg-5">
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0">
                        <i class="fa-solid fa-clock-rotate-left me-2"></i>Quyên góp gần đây
                    </h5>
                </div>
                <div class="card-body p-0">
                    <div class="donation-feed" id="donationFeed">
                        <!-- Dynamic content -->
                    </div>
                </div>
            </div>

            <!-- Impact Stats -->
            <div class="card mt-4">
                <div class="card-header">
                    <h5 class="mb-0">
                        <i class="fa-solid fa-chart-pie me-2"></i>Tác động của bạn
                    </h5>
                </div>
                <div class="card-body">
                    <div class="impact-item">
                        <div class="impact-icon">
                            <i class="fa-solid fa-bowl-rice"></i>
                        </div>
                        <div class="impact-info">
                            <span class="impact-value">500,000đ</span>
                            <span class="impact-desc">= 50kg gạo cho 10 gia đình</span>
                        </div>
                    </div>
                    <div class="impact-item">
                        <div class="impact-icon">
                            <i class="fa-solid fa-kit-medical"></i>
                        </div>
                        <div class="impact-info">
                            <span class="impact-value">1,000,000đ</span>
                            <span class="impact-desc">= 20 hộp sơ cứu</span>
                        </div>
                    </div>
                    <div class="impact-item">
                        <div class="impact-icon">
                            <i class="fa-solid fa-house"></i>
                        </div>
                        <div class="impact-info">
                            <span class="impact-value">5,000,000đ</span>
                            <span class="impact-desc">= 1 bộ lều bạt gia đình</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section Styles {
<style>
    .campaign-hero {
        background: linear-gradient(135deg, rgba(37, 99, 235, 0.05), rgba(37, 99, 235, 0.1));
        padding: 40px;
        border-radius: 16px;
    }

    .campaign-status {
        display: inline-flex;
        align-items: center;
        font-size: 0.875rem;
        color: var(--success-color);
        font-weight: 500;
        margin-bottom: 12px;
    }

    .campaign-title {
        font-size: 2.25rem;
        font-weight: 700;
        margin-bottom: 16px;
    }

    .campaign-desc {
        font-size: 1.1rem;
        color: var(--text-secondary);
        line-height: 1.7;
        margin-bottom: 24px;
    }

    .progress-labels {
        display: flex;
        align-items: baseline;
        gap: 4px;
        margin-top: 12px;
    }

    .progress-raised {
        font-size: 1.5rem;
        font-weight: 700;
        color: var(--primary-color);
    }

    .progress-target {
        color: var(--text-secondary);
    }

    .campaign-stats {
        display: flex;
        gap: 32px;
        margin-top: 20px;
    }

    .c-stat {
        display: flex;
        flex-direction: column;
    }

    .c-stat-value {
        font-size: 1.5rem;
        font-weight: 700;
    }

    .c-stat-label {
        color: var(--text-secondary);
        font-size: 0.875rem;
    }

    .preset-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 12px;
    }

    .preset-btn {
        padding: 14px;
        border: 2px solid var(--border-color);
        border-radius: 10px;
        background: transparent;
        font-weight: 600;
        transition: all var(--transition-fast);
    }

    .preset-btn:hover, .preset-btn.active {
        border-color: var(--primary-color);
        background: rgba(37, 99, 235, 0.05);
        color: var(--primary-color);
    }

    .payment-methods {
        display: flex;
        gap: 12px;
    }

    .payment-method {
        flex: 1;
        cursor: pointer;
    }

    .payment-method input { display: none; }

    .method-box {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 8px;
        padding: 16px;
        border: 2px solid var(--border-color);
        border-radius: 10px;
        transition: all var(--transition-fast);
    }

    .method-box i { font-size: 1.5rem; }

    .payment-method input:checked + .method-box {
        border-color: var(--primary-color);
        background: rgba(37, 99, 235, 0.05);
        color: var(--primary-color);
    }

    .goods-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 12px;
    }

    .goods-item { cursor: pointer; }
    .goods-item input { display: none; }

    .goods-box {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 8px;
        padding: 16px;
        border: 2px solid var(--border-color);
        border-radius: 10px;
        transition: all var(--transition-fast);
    }

    .goods-item input:checked + .goods-box {
        border-color: var(--success-color);
        background: rgba(34, 197, 94, 0.05);
        color: var(--success-color);
    }

    .donation-feed {
        max-height: 400px;
        overflow-y: auto;
    }

    .donation-item {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 14px 16px;
        border-bottom: 1px solid var(--border-color);
    }

    .donor-avatar {
        width: 44px;
        height: 44px;
        background: var(--primary-color);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-weight: 600;
    }

    .donor-info { flex: 1; }
    .donor-name { font-weight: 600; }
    .donor-amount { color: var(--success-color); font-weight: 600; }
    .donor-time { font-size: 0.8rem; color: var(--text-secondary); }

    .impact-item {
        display: flex;
        align-items: center;
        gap: 14px;
        padding: 12px 0;
        border-bottom: 1px solid var(--border-color);
    }

    .impact-item:last-child { border-bottom: none; }

    .impact-icon {
        width: 48px;
        height: 48px;
        background: rgba(37, 99, 235, 0.1);
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--primary-color);
        font-size: 1.25rem;
    }

    .impact-value { font-weight: 700; display: block; }
    .impact-desc { font-size: 0.875rem; color: var(--text-secondary); }
</style>
}

@section Scripts {
<script>
document.addEventListener('DOMContentLoaded', async function() {
    // Load donations
    const response = await fetch('/data/donations.json');
    const data = await response.json();

    const feed = document.getElementById('donationFeed');
    data.recentDonations.forEach(d => {
        feed.innerHTML += `
            <div class="donation-item">
                <div class="donor-avatar">${d.donor === 'Ẩn danh' ? '?' : d.donor.charAt(0)}</div>
                <div class="donor-info">
                    <div class="donor-name">${d.donor}</div>
                    <div class="donor-amount">${new Intl.NumberFormat('vi-VN').format(d.amount)} VNĐ</div>
                </div>
                <div class="donor-time">${JCIRelief.MapUtils.formatRelativeTime(d.timestamp)}</div>
            </div>
        `;
    });

    // Preset buttons
    document.querySelectorAll('.preset-btn').forEach(btn => {
        btn.addEventListener('click', function() {
            document.querySelectorAll('.preset-btn').forEach(b => b.classList.remove('active'));
            this.classList.add('active');
            document.getElementById('customAmount').value = this.dataset.amount;
        });
    });

    // Donate button
    document.getElementById('donateBtn').addEventListener('click', function() {
        JCIRelief.FormUtils.showToast('Cảm ơn bạn đã quyên góp! ❤️', 'success');
    });
});
</script>
}
